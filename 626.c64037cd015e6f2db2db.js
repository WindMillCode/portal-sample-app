"use strict";(self.webpackChunkangular_app=self.webpackChunkangular_app||[]).push([[626],{8626:(B,v,o)=>{o.r(v),o.d(v,{StoreModule:()=>S});var f=o(8583),h=o(1633),g=o(6363),p=o(8364),l=o(2340),m=o(3342),M=o(5257),t=o(639),C=o(5464);const T=function(){return{val:"Item0"}},b=function(){return{val:"Img0"}},x=function(){return{val:"Price0"}},Z=function(){return{val:"Button0"}};function q(i,s){if(1&i){const e=t.EpF();t.TgZ(0,"div"),t._UZ(1,"img",1),t.TgZ(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"h3"),t._uU(5),t.qZA(),t.TgZ(6,"button",2),t.NdJ("click",function(n){return t.CHM(e).$implicit.addItem.click(n)}),t._uU(7,"Add To Cart"),t.qZA(),t.qZA()}if(2&i){const e=s.$implicit,a=t.oxw();t.Tol(a.prefix.pods[0](t.DdM(11,T))),t.xp6(1),t.Tol(a.prefix.pods[0](t.DdM(12,b))),t.Q6J("src",e.img.src,t.LSH),t.xp6(2),t.hij(" ",e.title.text," "),t.xp6(1),t.Tol(a.prefix.pods[0](t.DdM(13,x))),t.xp6(1),t.hij(" ",e.price.text," "),t.xp6(1),t.Tol(a.prefix.pods[0](t.DdM(14,Z)))}}const y=function(){return{val:""}},F=[{path:"",component:(()=>{class i{constructor(e,a,n){this.ref=e,this.vcf=a,this.ryber=n,this.meta={name:"Shop"},this.myClass=`a_p_p_${this.meta.name}View`,this.prefix={main:(0,p.Fq)({view:`${this.meta.name}MainPod`}),view:(0,p.Fq)({view:`${this.meta.name}`}),pods:Array(1).fill(null).map((u,d)=>(0,p.Fq)({view:`${this.meta.name}Pod`+d}))},this.subs=[],this.shop={}}ngOnInit(){let{ryber:e,ref:a}=this;e.http.post(`${l.N.backend.url}/product/list`,{}).pipe((0,m.b)(n=>{e.store.products.items=n.message.list.map((u,d)=>({title:{text:u.title},img:{src:u.img_url},price:{text:`$${u.price}`,value:u.price},addItem:{click:c=>{n.addItem.inCart?(n.quantity.input.value+=1,e.router.navigateByUrl("/cart")):(e.store.cart.items.push(n),e.router.navigateByUrl("/cart"),n.addItem.inCart=!0),e.store.accounts.current.user&&(0,g.s)(()=>""===e.store.cart.id,e.http.put(`${l.N.backend.url}/cart/create`,{cartData:{cart:e.store.cart.items.map((r,A)=>({img:r.img,price:r.price,quantity:{input:r.quantity.input},title:r.title})),total:e.store.cart.total.value()},userData:{user:e.store.accounts.current.user,pass:e.store.accounts.current.pass}}),e.http.patch(`${l.N.backend.url}/cart/update`,{data:{cart_id:e.store.cart.id,update_body:{cart:e.store.cart.items.map((r,A)=>({img:r.img,price:r.price,quantity:{input:r.quantity.input},title:r.title})),total:e.store.cart.total.value()}}})).pipe((0,m.b)(r=>{""===e.store.cart.id&&(e.store.cart.id=r.message.cartId)},console.error)).subscribe()},inCart:!1},removeItem:{click:c=>{let r=e.store.cart.items.indexOf(n);e.store.cart.items.splice(r,1),n.addItem.inCart=!1}},quantity:{input:{value:1,blur:c=>{n.quantity.input.value=c.target.value},focusout:c=>{n.quantity.input.value=c.target.value}},add:{click:c=>{n.quantity.input.value++}},remove:{click:c=>{n.quantity.input.value>1&&n.quantity.input.value--}}},subtotal:{text:()=>"$"+n.subtotal.value(),value:()=>{let c=(n.price.value*n.quantity.input.value).toFixed(2);return parseFloat(c)}}})),a.detectChanges()},n=>{(0,p.oT)({ryber:e,ref:a,iif:g.s,env:l.N,tap:m.b})}),(0,M.q)(1)).subscribe()}ngOnDestroy(){this.subs.forEach((e,a)=>{null==e||e.unsubscribe()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(t.sBO),t.Y36(t.s_b),t.Y36(C.p))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-main"]],hostVars:2,hostBindings:function(e,a){2&e&&t.Tol(a.myClass)},decls:3,vars:7,consts:[[3,"class",4,"ngFor","ngForOf"],[3,"src"],[3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"main"),t.TgZ(1,"section"),t.YNc(2,q,8,15,"div",0),t.qZA(),t.qZA()),2&e&&(t.Tol(a.prefix.main(t.DdM(5,y))),t.xp6(1),t.Tol(a.prefix.pods[0](t.DdM(6,y))),t.xp6(1),t.Q6J("ngForOf",a.ryber.store.products.items))},directives:[f.sg],encapsulation:2,changeDetection:0}),i})()}];let $=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[h.Bz.forChild(F)],h.Bz]}),i})(),S=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez,$]]}),i})()}}]);